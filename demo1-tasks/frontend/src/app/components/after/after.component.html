<div class="after-container">
  <div class="header">
    <h1>âœ¨ Natural Language Query (AFTER)</h1>
    <p class="subtitle">
      Just type what you want in plain English - powered by AI
    </p>
  </div>

  <div class="query-section">
    <div class="search-box">
      <input
        type="text"
        [(ngModel)]="query"
        (keypress)="onKeyPress($event)"
        placeholder="Show me overdue tasks assigned to Sarah..."
        class="query-input"
        [disabled]="loading"
      />
      <button
        (click)="executeQuery()"
        [disabled]="!query.trim() || loading"
        class="search-button"
      >
        @if (loading) {
          <span class="button-spinner"></span>
        } @else {
          ğŸ” Search
        }
      </button>
    </div>

    @if (explanation) {
      <div class="explanation">
        <strong>Understood:</strong> {{ explanation }}
      </div>
    }

    @if (error) {
      <div class="error-message">
        âŒ {{ error }}
      </div>
    }
  </div>

  <div class="examples-section">
    <p class="examples-label">Try these examples:</p>
    <div class="example-buttons">
      @for (example of exampleQueries; track example) {
        <button
          class="example-button"
          (click)="useExample(example)"
          [disabled]="loading"
        >
          {{ example }}
        </button>
      }
    </div>
  </div>

  @if (needsClarification) {
    <app-clarification
      [message]="clarificationMessage"
      [suggestions]="suggestions"
      (suggestionSelected)="onSuggestionSelected($event)"
    ></app-clarification>
  }

  <div class="results-section">
    <app-task-list
      [tasks]="tasks"
      [loading]="loading"
    ></app-task-list>
  </div>

  <div class="benefits">
    <h3>âœ¨ Benefits of Natural Language</h3>
    <ul>
      <li>ğŸ“ <strong>Type naturally</strong> - no need to learn complex UI</li>
      <li>ğŸ¤– <strong>AI-powered</strong> - understands context and intent</li>
      <li>ğŸ’¬ <strong>Asks for clarification</strong> - when ambiguous (try "Show me Sarah's tasks")</li>
      <li>ğŸ›¡ï¸ <strong>Safe</strong> - rejects dangerous queries (try "Delete all tasks")</li>
      <li>âš¡ <strong>10 lines of UI</strong> instead of 100+</li>
    </ul>
  </div>
</div>
